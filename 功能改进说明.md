# XunDoc 功能改进说明

## 最新改进（2025-10-27）

### 1. 深色模式与浅色模式适配 ✅
- **浅色模式**: 淡米黄色背景 (#FFFBF5)
- **深色模式**: 深色背景 (#121212)
- 所有文本、卡片、图标都会自动适配
- 在 iOS 设置中切换"外观"即可看到效果

### 2. 底部快捷按钮动画优化 ✅
- **打开时**: 十字图标向右旋转90度
- **关闭时**: 十字图标向左旋转回到原位
- 保持正十字的视觉效果

### 3. 底部导航栏优化 ✅
- 图标和文字间距缩小（4pt → 2pt）
- 视觉更加紧凑

### 4. 病历卡片项目对齐 ✅
- 所有项目（录音记录、检查报告、处方单等）完美左对齐
- 图标固定宽度20x20
- 文字左对齐填充剩余空间

### 5. 分步引导式添加病历 ✅
创建了新的分步引导界面，共5个步骤：

**步骤1: 医院信息**
- 输入医院名称

**步骤2: 科室与日期**
- 快速选择科室（内科、外科、儿科等）
- 选择就诊日期（日历视图）

**步骤3: 症状描述**
- 详细描述症状
- 多行文本输入

**步骤4: 诊断结果**
- 输入医生诊断（可选）

**步骤5: 备注信息**
- 添加其他备注（可选）
- 如：用药注意事项、复诊时间等

**特点：**
- 顶部进度条实时显示进度
- 支持上一步/下一步导航
- 必填项验证
- 完成后提示可添加报告和录音

### 6. 快捷添加功能 ✅
底部快捷面板三个按钮对应的页面：

**📢 录音记录**
- 医生诊断录音
- 录音时长实时显示
- 支持添加标题、医院、科室信息

**📄 添加报告**
- 拍摄或选择报告照片
- 输入报告标题
- 关联医院和科室
- 添加备注

**💊 用药提醒**
- 6步引导式添加药物：
  1. 药品名称（支持拍照识别）
  2. 剂型选择
  3. 规格/剂量
  4. 服用频率
  5. 服用时间
  6. 备注和周期
- 与"用药管理"页面使用同一套界面

## 文件结构

### 新增文件
- `AddCaseStepView.swift` - 分步引导式添加病历

### 修改文件
- `DesignSystem.swift` - 颜色系统支持深色/浅色模式
- `HomeView.swift` - 适配新颜色系统
- `RecordsView.swift` - 使用新的分步添加页面
- `MedicationView.swift` - 适配新颜色系统
- `MyView.swift` - 适配新颜色系统
- `CustomTabBar.swift` - 优化旋转动画和间距
- `QuickAddPanelView.swift` - 三个快捷按钮功能完整

## 使用说明

### 切换深色/浅色模式
1. 打开 iOS 设置
2. 选择"显示与亮度"
3. 切换"外观"即可

### 添加病历
1. 点击"就诊记录"标签
2. 点击右上角"+"按钮
3. 按照5个步骤填写信息
4. 完成后可继续添加报告和录音

### 快捷添加
1. 点击底部中间的"+"按钮
2. 十字会旋转90度，弹出快捷面板
3. 选择要添加的内容类型
4. 点击空白处或再次点击"+"关闭面板（十字旋转回原位）

## 注意事项
- 所有颜色使用统一的设计系统
- 支持动态类型和无障碍访问
- 所有动画流畅自然
- 分步填写降低用户认知负担
