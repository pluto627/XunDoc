# XunDoc App 中英文转换问题清单

## 问题概述
通过全面检查，发现多个页面存在大量硬编码的中英文文本，未使用本地化字符串。

---

## 1. HomeView.swift

### 需要添加的本地化字符串：
```
"family_members" = "家庭成员";
"family_members_en" = "Family";
"add" = "添加";
"add_en" = "Add";
"quick_actions" = "快速操作";
"add_record" = "添加记录";
"medication_reminder" = "用药提醒";
"vitals" = "生命体征";
"medical_documents" = "医疗文档";
"ai_doctor" = "AI 医生";
"health_overview" = "健康概览";
"details" = "详情";
"blood_pressure" = "血压";
"glucose_level" = "血糖水平";
"normal" = "正常";
"good" = "良好";
"today_reminders" = "今日提醒";
"no_reminders_today" = "今天没有提醒事项";
"take_medication" = "服药提醒";
"check_blood_pressure" = "测量血压";
```

### 需要修改的代码位置：
- 第128行：`"家庭成员"` → `NSLocalizedString("family_members", comment: "")`
- 第195行：`"添加"` → `NSLocalizedString("add", comment: "")`
- 第294行：`"Add"` → `NSLocalizedString("add", comment: "")`
- 第320行：`"快速操作"` → `NSLocalizedString("quick_actions", comment: "")`
- 第330-359行：多处硬编码需要替换
- 第394行：`"AI 医生"` → `NSLocalizedString("ai_doctor", comment: "")`
- 第473-503行：多处健康数据相关文本
- 第626-661行：今日提醒相关文本

---

## 2. ChatConsultationView.swift

### 需要添加的本地化字符串：
```
"ai_doctor" = "AI 医生";
"ai_analyzing" = "AI 医生正在分析...";
"welcome_message" = "👋 您好！我是您的AI健康助手";
"welcome_description" = "您可以：\n• 📸 发送症状照片进行分析\n• 💬 描述症状获取建议\n• 📋 上传报告进行解读\n• 💊 咨询用药问题";
"chat_history_title" = "对话历史";
"new_conversation" = "新建对话";
"no_chat_records" = "暂无对话记录";
"create_new_conversation" = "点击上方按钮创建新对话";
"message_xundoc_placeholder" = "Message XunDoc...";
"select_image" = "选择图片";
"take_photo_button" = "拍照";
"from_album" = "从相册选择";
"confirm_delete_conversation" = "确定要删除这个对话吗？此操作无法撤销。";
```

### 需要修改的代码位置：
- 第394行：硬编码 "AI 医生"
- 第594-599行：欢迎消息
- 第623行：分析提示
- 第742-749行：图片选择对话框
- 第755行：输入框占位符
- 第834-935行：对话历史相关

---

## 3. HealthRecordsView.swift

### 需要添加的本地化字符串：
```
"medical_records" = "就诊记录";
"add_new" = "新增";
"main_symptoms" = "主要症状：";
"no_health_records_title" = "暂无健康档案";
"add_first_record_desc" = "添加您的第一条就诊记录\n开始追踪您的健康历史";
"add_record_button" = "添加记录";
"visit_info" = "就诊信息";
"hospital_name" = "医院名称";
"department" = "科室";
"visit_date" = "就诊日期";
"visit_type" = "就诊类型";
"select_department" = "请选择科室";
"diagnosis_result" = "诊断结果";
"treatment_plan" = "治疗方案";
"reports" = "报告";
"visit_details" = "就诊详情";
"add_report" = "添加报告";
"add_recording" = "添加录音";
"recording" = "录音";
"recording_in_progress" = "录音中...";
```

### 需要修改的代码位置：
- 第45行及后续大量硬编码中文
- 第280-476行：添加记录表单
- 第730-952行：记录详情页面

---

## 4. ChronicDiseaseView.swift

### 需要添加的本地化字符串：
```
"chronic_disease_management" = "慢病管理";
"add_health_data_button" = "添加健康数据";
"add_medication_reminder_button" = "添加药物提醒";
"add_followup_reminder_button" = "添加复查提醒";
"all" = "全部";
"medication" = "用药";
"followup" = "复查";
"health_data" = "健康数据";
"please_select_member" = "请先选择家庭成员";
"select_member_hint" = "在首页选择一个家庭成员后即可开始管理健康数据";
"medication_reminders" = "药物提醒";
"followup_reminders" = "复查提醒";
"no_health_management_data" = "暂无健康管理数据";
"click_add_to_start" = "点击右上角+号开始添加健康数据、药物提醒或复查提醒";
```

---

## 5. PhotoDiagnosisView.swift

### 需要添加的本地化字符串：
```
"photo_diagnosis" = "图片诊断";
"ai_photo_diagnosis" = "AI图片诊断";
"upload_medical_image" = "上传医学影像或皮肤照片，获得专业的AI分析建议";
"upload_image" = "上传图片";
"click_upload" = "点击上传图片";
"support_formats" = "支持X光片、CT、MRI、皮肤照片等";
"reselect" = "重新选择";
"symptom_description_optional" = "症状描述（可选）";
"describe_symptoms_placeholder" = "描述相关症状...";
"additional_notes" = "附加说明";
"start_ai_analysis" = "开始AI分析";
"ai_analyzing_in_progress" = "AI分析中...";
"error" = "错误";
"diagnosis_result" = "诊断结果";
"ai_analysis_result" = "AI分析结果";
"professional_advice" = "专业建议";
"medical_attention_recommended" = "建议就医";
"consult_doctor_advice" = "建议尽快咨询专业医生获得进一步诊断和治疗";
"completed" = "完成";
```

---

## 6. MedicalNotificationsView.swift

### 需要添加的本地化字符串：
```
"medical_reminders" = "医疗提醒";
"add_reminder" = "添加提醒";
"clear_completed" = "清除已完成";
"all_filter" = "全部";
"today_filter" = "今天";
"upcoming_filter" = "即将到来";
"overdue_filter" = "已过期";
"completed_filter" = "已完成";
"no_reminders_title" = "暂无提醒";
"no_reminders_today_title" = "今天没有提醒";
"no_upcoming_reminders" = "暂无即将到来的提醒";
"no_overdue_reminders" = "没有过期的提醒";
"no_completed_reminders" = "暂无已完成的提醒";
"click_add_reminder" = "点击右上角添加新的医疗提醒";
"today_completed" = "已完成";
"overdue_days" = "已逾期 %d 天";
"overdue_hours" = "已逾期 %d 小时";
"medication_info" = "药物: %@";
"dosage_info" = "剂量: %@";
```

---

## 7. FamilyManagementView.swift

### 需要添加的本地化字符串：
```
"family_sharing" = "家人共享";
"invite_family" = "邀请家人";
"generate_invite_code_desc" = "生成邀请码，让家人加入您的健康圈，互相查看健康数据";
"generate_code" = "生成邀请码";
"my_invite_codes" = "我的邀请码";
"valid_until" = "有效期至 %@";
"copied" = "已复制";
"copy" = "复制";
"invite_code_generated" = "邀请码已生成";
"share_code_hint" = "将邀请码分享给家人，让他们加入您的健康圈";
"valid_period" = "有效期：7天 • 11位邀请码";
"copy_to_clipboard" = "复制邀请码";
"copied_to_clipboard" = "已复制到剪贴板";
"family_members_list" = "家庭成员";
"no_family_members_yet" = "还没有家庭成员";
"joined_on" = "加入于 %@";
"can_view_health_data" = "可查看健康数据";
"cannot_view_health_data" = "无法查看健康数据";
"remove" = "移除";
"confirm_remove" = "确认移除";
"remove_member_message" = "确定要移除\"%@\"吗？移除后将无法互相查看健康数据。";
"join_with_code" = "使用邀请码加入";
"enter_invite_code" = "输入邀请码";
"enter_11_digit_code" = "输入家人分享给您的11位邀请码";
"join_family" = "加入家庭";
"hint" = "提示";
"join_success_message" = "✅ %@\n\n已自动添加对方为家庭成员。\n现在您可以：\n• 在首页选择该成员\n• 为他们记录健康数据\n• 查看为他们记录的数据";
```

---

## 8. AddHealthDataView.swift

### 需要添加的本地化字符串：
```
"add_health_data" = "添加健康数据";
"data_type" = "数据类型";
"value" = "数值";
"record_time" = "记录时间";
"notes_optional" = "备注（可选）";
"save_data" = "保存数据";
```

---

## 修复步骤建议：

### 步骤1：更新 Localizable.strings
将上述所有本地化字符串添加到：
- `zh-Hans.lproj/Localizable.strings` （中文）
- `en.lproj/Localizable.strings` （英文）

### 步骤2：逐个文件修改
按照上述位置，将硬编码文本替换为：
```swift
NSLocalizedString("key_name", comment: "")
```

### 步骤3：测试
1. 切换系统语言到英文，检查所有页面
2. 切换回中文，确保没有遗漏
3. 特别注意动态文本（如日期格式、数字格式等）

---

## 优先级排序：

### 高优先级（用户最常用）：
1. **HomeView.swift** - 首页，用户每次打开都会看到
2. **ChatConsultationView.swift** - AI咨询，核心功能
3. **HealthRecordsView.swift** - 健康档案，常用功能

### 中优先级：
4. **MedicalNotificationsView.swift** - 提醒功能
5. **ChronicDiseaseView.swift** - 慢病管理
6. **PhotoDiagnosisView.swift** - 图片诊断

### 低优先级：
7. **FamilyManagementView.swift** - 设置类功能
8. **AddHealthDataView.swift** - 辅助功能

---

## 注意事项：
1. 日期格式化需要根据语言环境调整
2. 某些图标文字（如"AI 医生"）可能需要保持品牌一致性
3. 数字和单位的显示格式可能需要本地化
4. 某些专业医学术语需要准确翻译

生成时间：2025-10-11



