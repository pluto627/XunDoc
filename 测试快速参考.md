# ğŸš€ XunDoc è‡ªåŠ¨åŒ–æµ‹è¯• - å¿«é€Ÿå‚è€ƒ

## ä¸€é”®è¿è¡Œæµ‹è¯•

### æ–¹æ³•1ï¸âƒ£: ä½¿ç”¨Shellè„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/plutoguo/Desktop/XunDoc

# å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼Œä»…æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½ï¼Œçº¦1-2åˆ†é’Ÿï¼‰
./run_tests.sh --quick

# å®Œæ•´UIæµ‹è¯•ï¼ˆçº¦3-5åˆ†é’Ÿï¼‰
./run_tests.sh --ui

# æ‰€æœ‰æµ‹è¯• + ç”ŸæˆæŠ¥å‘Š
./run_tests.sh --all --report

# æ¸…ç†åæµ‹è¯•
./run_tests.sh --ui --clean

# åœ¨ç‰¹å®šè®¾å¤‡ä¸Šæµ‹è¯•
./run_tests.sh --ui --device "iPhone 14"
```

### æ–¹æ³•2ï¸âƒ£: ä½¿ç”¨Fastlaneï¼ˆåŠŸèƒ½æœ€å¼ºå¤§ï¼‰

```bash
# é¦–æ¬¡ä½¿ç”¨éœ€è¦å®‰è£…
sudo gem install fastlane

# å¿«é€Ÿæµ‹è¯•
fastlane quick_test

# UIè‡ªåŠ¨åŒ–æµ‹è¯•
fastlane ui_test

# å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆå¤šè®¾å¤‡ï¼‰
fastlane full_test

# å¤œé—´å›å½’æµ‹è¯•
fastlane nightly
```

### æ–¹æ³•3ï¸âƒ£: ä½¿ç”¨Xcodeï¼ˆæœ€ç›´è§‚ï¼‰

1. æ‰“å¼€é¡¹ç›®ï¼š`open XunDoc.xcodeproj`
2. æŒ‰ `Cmd + 6` æ‰“å¼€æµ‹è¯•å¯¼èˆªå™¨
3. æ‰¾åˆ° `XunDocUITests` > `XunDocAutomatedTests`
4. ç‚¹å‡» â–¶ï¸ è¿è¡Œæµ‹è¯•
5. æˆ–æŒ‰ `Cmd + U` è¿è¡Œæ‰€æœ‰æµ‹è¯•

---

## ğŸ“Š æµ‹è¯•ç”¨ä¾‹æ¸…å•

| # | æµ‹è¯•åç§° | è€—æ—¶ | ä¼˜å…ˆçº§ |
|---|---------|------|-------|
| 1 | åº”ç”¨å¯åŠ¨ | ~3ç§’ | P0 â­â­â­ |
| 2 | åº•éƒ¨å¯¼èˆª | ~5ç§’ | P0 â­â­â­ |
| 3 | åˆ›å»ºè®°å½• | ~8ç§’ | P0 â­â­â­ |
| 4 | æœç´¢åŠŸèƒ½ | ~3ç§’ | P1 â­â­ |
| 5 | æŸ¥çœ‹è¯¦æƒ… | ~4ç§’ | P1 â­â­ |
| 6 | æ·»åŠ ç”¨è¯ | ~10ç§’ | P0 â­â­â­ |
| 7 | å®Œæˆç”¨è¯ | ~3ç§’ | P1 â­â­ |
| 8 | ä¸ªäººé¡µé¢ | ~5ç§’ | P1 â­â­ |
| 9 | åˆ‡æ¢æ€§èƒ½ | ~15ç§’ | P1 â­â­ |
| 10 | ç¨³å®šæ€§æµ‹è¯• | ~10ç§’ | P1 â­â­ |

**æ€»è®¡**: çº¦60-90ç§’ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼šçº¦15ç§’ï¼‰

---

## ğŸ¯ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### ğŸ“± è¿è¡Œæµ‹è¯•

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
./run_tests.sh -q

# UIæµ‹è¯•
./run_tests.sh -u

# å®Œæ•´æµ‹è¯•
./run_tests.sh -a

# å¸¦æŠ¥å‘Š
./run_tests.sh -u -r

# æ¸…ç† + æµ‹è¯•
./run_tests.sh -u -c
```

### ğŸ”§ Xcodeå‘½ä»¤è¡Œ

```bash
# è¿è¡ŒUIæµ‹è¯•
xcodebuild test \
  -project XunDoc.xcodeproj \
  -scheme XunDoc \
  -destination 'platform=iOS Simulator,name=iPhone 15 Pro,OS=17.0' \
  -only-testing:XunDocUITests

# è¿è¡Œå•ä¸ªæµ‹è¯•
xcodebuild test \
  -project XunDoc.xcodeproj \
  -scheme XunDoc \
  -destination 'platform=iOS Simulator,name=iPhone 15 Pro,OS=17.0' \
  -only-testing:XunDocUITests/XunDocAutomatedTests/test001_AppLaunch
```

### ğŸ“Š æŸ¥çœ‹ç»“æœ

```bash
# æŸ¥çœ‹æœ€æ–°æµ‹è¯•ç»“æœ
open ~/Library/Developer/Xcode/DerivedData/*/Logs/Test/*.xcresult

# ç”ŸæˆJSONæŠ¥å‘Š
xcrun xcresulttool get --format json --path TestResults.xcresult
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: æ‰¾ä¸åˆ°å…ƒç´ 
```swift
// ä½¿ç”¨æ¨¡ç³ŠåŒ¹é…
let button = app.buttons.matching(
    NSPredicate(format: "label CONTAINS 'ç™»å½•'")
).firstMatch

// æ‰“å°æ‰€æœ‰å…ƒç´ 
print(app.debugDescription)
```

### é—®é¢˜2: æµ‹è¯•è¶…æ—¶
```swift
// å¢åŠ ç­‰å¾…æ—¶é—´
let exists = element.waitForExistence(timeout: 10)
```

### é—®é¢˜3: æ¨¡æ‹Ÿå™¨å¡ä½
```bash
# é‡ç½®æ¨¡æ‹Ÿå™¨
xcrun simctl shutdown all
xcrun simctl erase all
```

### é—®é¢˜4: è„šæœ¬æƒé™é”™è¯¯
```bash
chmod +x run_tests.sh
```

---

## ğŸ“ˆ æ¨èæµ‹è¯•é¢‘ç‡

| åœºæ™¯ | æµ‹è¯•ç±»å‹ | é¢‘ç‡ |
|------|---------|------|
| æ¯æ¬¡ä»£ç æäº¤å‰ | å¿«é€Ÿæµ‹è¯• | å¿…é¡» |
| æ¯æ—¥å¼€å‘ç»“æŸ | UIæµ‹è¯• | å»ºè®® |
| å‘å¸ƒå‰ | å®Œæ•´æµ‹è¯• | å¿…é¡» |
| å¤œé—´è‡ªåŠ¨åŒ– | å›å½’æµ‹è¯• | æ¯æ™š |

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æäº¤ä»£ç å‰**: è¿è¡Œå¿«é€Ÿæµ‹è¯•
   ```bash
   ./run_tests.sh --quick
   ```

2. **ä¿®æ”¹UIå**: è¿è¡ŒUIæµ‹è¯•
   ```bash
   ./run_tests.sh --ui
   ```

3. **å‘å¸ƒç‰ˆæœ¬å‰**: è¿è¡Œå®Œæ•´æµ‹è¯•
   ```bash
   fastlane full_test
   ```

4. **ä¿®å¤Bugå**: è¿è¡Œç›¸å…³æµ‹è¯•ç”¨ä¾‹
   ```bash
   # åœ¨Xcodeä¸­å•ç‹¬è¿è¡Œå¯¹åº”çš„æµ‹è¯•
   ```

---

## ğŸ“ è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹è„šæœ¬å¸®åŠ©
./run_tests.sh --help

# æŸ¥çœ‹Fastlaneå¸®åŠ©
fastlane --help

# æŸ¥çœ‹å¯ç”¨çš„lane
fastlane lanes
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
XunDoc/
â”œâ”€â”€ run_tests.sh                    # ä¸€é”®æµ‹è¯•è„šæœ¬ â­
â”œâ”€â”€ XunDocUITests/
â”‚   â””â”€â”€ XunDocAutomatedTests.swift  # æµ‹è¯•ä»£ç  â­
â”œâ”€â”€ fastlane/
â”‚   â””â”€â”€ Fastfile                    # Fastlaneé…ç½® â­
â”œâ”€â”€ è‡ªåŠ¨åŒ–æµ‹è¯•ä½¿ç”¨æŒ‡å—.md            # è¯¦ç»†æ–‡æ¡£
â””â”€â”€ æµ‹è¯•å¿«é€Ÿå‚è€ƒ.md                 # æœ¬æ–‡æ¡£
```

---

## ğŸ“ å­¦ä¹ èµ„æº

- **Appleå®˜æ–¹æ–‡æ¡£**: [XCTest Framework](https://developer.apple.com/documentation/xctest)
- **Fastlaneæ–‡æ¡£**: [docs.fastlane.tools](https://docs.fastlane.tools)
- **è§†é¢‘æ•™ç¨‹**: æœç´¢ "iOS UI Testing XCUITest"

---

**å¿«é€Ÿå¼€å§‹**:
```bash
cd /Users/plutoguo/Desktop/XunDoc
./run_tests.sh --quick
```

**å®Œæ•´æµ‹è¯•**:
```bash
fastlane full_test
```

ç¥æµ‹è¯•é¡ºåˆ©ï¼ğŸš€


