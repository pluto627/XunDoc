# ğŸš¨ ç´§æ€¥å®‰å…¨é€šçŸ¥

## âš ï¸ API Key æ³„éœ²è­¦å‘Š

**æ—¥æœŸ**: 2025-10-31

**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ é«˜å±

---

## ğŸ“¢ é—®é¢˜è¯´æ˜

åœ¨é¡¹ç›®çš„æ—©æœŸæäº¤ï¼ˆcommit `e9cd442` åŠä¹‹å‰ï¼‰ä¸­ï¼Œä»¥ä¸‹ API Key è¢«æ„å¤–ç¡¬ç¼–ç åœ¨ä»£ç ä¸­å¹¶æ¨é€åˆ°äº†å…¬å¼€çš„ GitHub ä»“åº“ï¼š

1. **Kimi API Key**: `sk-CE6JIOSti61TqFYhPFs6OrTS5wMtJvA8v2YsnPIw1SFgeqcu`
2. **Moonshot API Key**: `sk-wc9tcOA0q2ShfOjKZ91YStbbyyoMGpiegf6zq54i9kpaQtke`

### å½±å“èŒƒå›´

- âœ… **å·²ä¿®å¤**: Commit `e130c33` å·²ç§»é™¤æ‰€æœ‰ç¡¬ç¼–ç çš„ API Key
- âš ï¸ **å†å²è®°å½•**: Git å†å²ä¸­ä»åŒ…å«è¿™äº› Keyï¼ˆéœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼‰
- âš ï¸ **å…¬å¼€ä»“åº“**: ä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹å†å²æäº¤è®°å½•

---

## ğŸ”¥ ç«‹å³è¡ŒåŠ¨æ¸…å•

### ä½œä¸ºä»“åº“æ‰€æœ‰è€…ï¼Œä½ éœ€è¦ï¼š

- [ ] **1. ç«‹å³æ’¤é”€æ³„éœ²çš„ API Key**
  - ç™»å½• Moonshot AI æ§åˆ¶å°ï¼šhttps://platform.moonshot.cn/console/api-keys
  - æ‰¾åˆ°å¹¶åˆ é™¤ä»¥ä¸‹ Keyï¼š
    - `sk-CE6JIOSti61TqFYhPFs6OrTS5wMtJvA8v2YsnPIw1SFgeqcu`
    - `sk-wc9tcOA0q2ShfOjKZ91YStbbyyoMGpiegf6zq54i9kpaQtke`

- [ ] **2. ç”Ÿæˆæ–°çš„ API Key**
  - åœ¨åŒä¸€æ§åˆ¶å°åˆ›å»ºæ–°çš„ API Key
  - å¦¥å–„ä¿å­˜ï¼ˆåªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼‰

- [ ] **3. æ£€æŸ¥è´¦å•å’Œä½¿ç”¨è®°å½•**
  - æŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸çš„ API è°ƒç”¨
  - ç¡®è®¤æ²¡æœ‰äº§ç”Ÿæ„å¤–è´¹ç”¨

- [ ] **4. é…ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒ**
  - æŒ‰ç…§ `API_KEY_SETUP.md` çš„æŒ‡å¼•é…ç½®æ–° Key
  - ç¡®ä¿ä¸å†ç¡¬ç¼–ç  API Key

- [ ] **5. (å¯é€‰ä½†æ¨è) æ¸…ç† Git å†å²è®°å½•**
  - å‚è€ƒä¸‹æ–¹çš„"æ¸…ç† Git å†å²"éƒ¨åˆ†

### ä½œä¸ºé¡¹ç›®ä½¿ç”¨è€…ï¼Œä½ éœ€è¦ï¼š

- [ ] **1. è·å–è‡ªå·±çš„ API Key**
  - ä¸è¦ä½¿ç”¨å·²æ³„éœ²çš„ Keyï¼ˆå·²å¤±æ•ˆï¼‰
  - æŒ‰ç…§ `API_KEY_SETUP.md` é…ç½®

- [ ] **2. æ›´æ–°åˆ°æœ€æ–°ä»£ç **
```bash
git pull origin main
```

---

## ğŸ§¹ æ¸…ç† Git å†å²è®°å½•ï¼ˆå¯é€‰ï¼‰

âš ï¸ **è­¦å‘Š**: è¿™ä¼šæ”¹å†™æ•´ä¸ª Git å†å²ï¼Œæ‰€æœ‰åä½œè€…éƒ½éœ€è¦é‡æ–°å…‹éš†ä»“åº“ï¼

### æ–¹æ³• 1ï¼šä½¿ç”¨ git filter-repoï¼ˆæ¨èï¼‰

```bash
# å®‰è£… git-filter-repoï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
# macOS:
brew install git-filter-repo

# å¤‡ä»½ä»“åº“
cd ..
cp -r XunDoc XunDoc-backup

# æ¸…ç†åŒ…å«æ•æ„Ÿä¿¡æ¯çš„æ–‡ä»¶
cd XunDoc
git filter-repo --invert-paths \
  --path XunDoc/Managers/KimiAPIManager.swift \
  --path XunDoc/Managers/MoonshotAPIManager.swift \
  --force

# é‡æ–°æ·»åŠ æ¸…ç†åçš„æ–‡ä»¶
git remote add origin https://github.com/pluto627/XunDoc.git
git push origin --force --all
git push origin --force --tags
```

### æ–¹æ³• 2ï¼šä½¿ç”¨ BFG Repo-Cleaner

```bash
# ä¸‹è½½ BFG
brew install bfg

# å¤‡ä»½ä»“åº“
cd ..
cp -r XunDoc XunDoc-backup

# æ¸…ç†æ•æ„Ÿä¿¡æ¯
cd XunDoc
bfg --replace-text passwords.txt  # åˆ›å»ºåŒ…å«è¦æ›¿æ¢çš„æ–‡æœ¬çš„æ–‡ä»¶

# æ¸…ç†å’Œæ¨é€
git reflog expire --expire=now --all
git gc --prune=now --aggressive
git push origin --force --all
git push origin --force --tags
```

### æ–¹æ³• 3ï¼šåˆ é™¤ä»“åº“é‡æ–°å¼€å§‹ï¼ˆæœ€ç®€å•ï¼‰

å¦‚æœè¿™ä¸ªä»“åº“è¿˜ä¸é‡è¦ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š

1. åœ¨ GitHub ä¸Šåˆ é™¤æ•´ä¸ªä»“åº“
2. åˆ›å»ºæ–°çš„ä»“åº“
3. æ¨é€æ¸…ç†åçš„ä»£ç ï¼š

```bash
cd /Users/plutoguo/Desktop/XunDoc
rm -rf .git
git init
git add .
git commit -m "Initial commit - v1.0.1 with security fixes"
git branch -M main
git remote add origin https://github.com/pluto627/XunDoc.git
git push -u origin main --force
```

---

## ğŸ›¡ï¸ é¢„é˜²æªæ–½

ä¸ºäº†é¿å…å°†æ¥å†æ¬¡æ³„éœ²æ•æ„Ÿä¿¡æ¯ï¼š

### 1. ä½¿ç”¨ pre-commit hooks

åˆ›å»º `.git/hooks/pre-commit`:

```bash
#!/bin/bash
if git diff --cached | grep -E "(sk-[A-Za-z0-9]{48}|api[_-]?key|password|secret)"; then
    echo "âš ï¸  è­¦å‘Šï¼šæ£€æµ‹åˆ°å¯èƒ½çš„æ•æ„Ÿä¿¡æ¯ï¼"
    echo "è¯·æ£€æŸ¥æ˜¯å¦åŒ…å« API Key æˆ–å¯†ç "
    exit 1
fi
```

### 2. ä½¿ç”¨ git-secrets

```bash
# å®‰è£…
brew install git-secrets

# é…ç½®
cd /Users/plutoguo/Desktop/XunDoc
git secrets --install
git secrets --register-aws
git secrets --add 'sk-[A-Za-z0-9]{48}'
```

### 3. ä½¿ç”¨ GitHub Secret Scanning

GitHub ä¼šè‡ªåŠ¨æ‰«æå…¬å¼€ä»“åº“ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼Œä½†å·²ç»å¤ªæ™šäº†ã€‚

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼š

- ğŸ“§ Email: plutoguogg@gmail.com
- ğŸ”— GitHub Issues: https://github.com/pluto627/XunDoc/issues
- ğŸ“– é…ç½®æŒ‡å—: [API_KEY_SETUP.md](API_KEY_SETUP.md)

---

## ğŸ“‹ æ›´æ–°æ—¥å¿—

- **2025-10-31**: å‘ç° API Key æ³„éœ²é—®é¢˜
- **2025-10-31**: Commit `e130c33` ä¿®å¤ç¡¬ç¼–ç é—®é¢˜
- **å¾…å®š**: æ¸…ç† Git å†å²è®°å½•

---

**å®‰å…¨æ— å°äº‹ï¼Œè¯·è®¤çœŸå¯¹å¾…ï¼ğŸ”’**

å¦‚æœä½ å·²ç»å®Œæˆäº†æ‰€æœ‰å¿…è¦çš„æ“ä½œï¼Œå¯ä»¥åˆ é™¤è¿™ä¸ªé€šçŸ¥æ–‡ä»¶ã€‚

