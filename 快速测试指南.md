# ⚡ XunDoc 快速测试指南

## 🚨 遇到 "IDE disconnection" 错误？

不用担心！按照下面的步骤操作。

---

## 🎯 方法 1: 使用自动化脚本（最简单！）

我已经为你创建了一个一键运行脚本：

```bash
/Users/plutoguo/Desktop/XunDoc/run_ui_tests.sh
```

这个脚本会自动：
- 清理缓存
- 启动模拟器  
- 构建测试
- 运行测试

**如果这个方法有效，你就可以看到测试运行了！** 🎉

---

## 🎯 方法 2: 在 Xcode 中手动操作（推荐）

### 步骤 1️⃣: 清理项目

在 Xcode 中：
1. 按 `⌘ + Shift + K` (Clean Build Folder)
2. 或者菜单: **Product** → **Clean Build Folder**

### 步骤 2️⃣: 选择正确的模拟器

1. 点击 Xcode 顶部的设备选择器
2. 选择一个**具体的** iPhone 模拟器
   - ✅ 推荐: **iPhone 15 Pro**
   - ✅ 也可以: iPhone 14 Pro, iPhone 16 等
   - ❌ 不要选: "Any iOS Simulator Device"

### 步骤 3️⃣: 先运行基础测试

1. 按 `⌘ + 6` 打开测试导航器
2. 找到 `XunDocComprehensiveStressTests`
3. 展开后找到 **`test000_BasicConnectionTest`**
4. 点击这个测试旁边的 ▶️ 按钮

**这是一个超级简单的测试，如果它能运行，说明测试框架工作正常！**

### 步骤 4️⃣: 运行完整测试（可选）

如果基础测试通过了，再运行完整测试：
- 找到 **`testZZZ_RunAllStressTests`**  
- 点击旁边的 ▶️ 按钮

---

## 🎯 方法 3: 命令行快速测试

### 只运行基础测试

```bash
cd /Users/plutoguo/Desktop/XunDoc

xcodebuild test \
  -project XunDoc.xcodeproj \
  -scheme XunDoc \
  -destination 'platform=iOS Simulator,name=iPhone 15 Pro' \
  -only-testing:XunDocUITests/XunDocComprehensiveStressTests/test000_BasicConnectionTest
```

如果看到：
```
✅ [通过] 基础连接测试完成 - 测试框架工作正常！
Test Case '-[XunDocUITests.XunDocComprehensiveStressTests test000_BasicConnectionTest]' passed
```

**恭喜！测试框架正常工作了！** 🎉

---

## 🔧 仍然失败？试试这个

### 终极清理大法

在终端运行：

```bash
# 1. 关闭 Xcode
killall Xcode

# 2. 清理所有缓存
rm -rf ~/Library/Developer/Xcode/DerivedData

# 3. 重启模拟器
xcrun simctl shutdown all
xcrun simctl erase all

# 4. 重新打开 Xcode
open /Users/plutoguo/Desktop/XunDoc/XunDoc.xcodeproj

# 等待项目完全加载后，再运行测试
```

---

## 📊 测试列表

### 基础测试（必须先通过）
- ✅ **test000_BasicConnectionTest** - 验证测试框架工作

### 快速测试（5-10分钟）
- test001_AppLaunchStress - 应用启动
- test002_TabBarNavigation - 导航切换
- test010_UIElementsCheck - UI检查

### 完整测试（10-15分钟）
- **testZZZ_RunAllStressTests** - 运行全部 21 个测试

---

## ✅ 成功的标志

如果测试成功运行，你会在控制台看到：

```
🔥 [基础测试-000] 测试框架连接验证
  ✓ 测试框架连接正常
  ✓ 应用启动成功
  ✓ UI元素可访问
✅ [通过] 基础连接测试完成 - 测试框架工作正常！

Test Case '-[XunDocUITests.XunDocComprehensiveStressTests test000_BasicConnectionTest]' passed (3.456 seconds).
```

---

## 🆘 快速诊断

**问题**: 应用没有启动  
**解决**: 选择具体的模拟器，不要选 "Any Device"

**问题**: 测试立即失败  
**解决**: 清理派生数据 `rm -rf ~/Library/Developer/Xcode/DerivedData`

**问题**: 模拟器黑屏  
**解决**: 重置模拟器 `xcrun simctl erase all`

**问题**: 找不到测试  
**解决**: 重新构建项目 `⌘ + B`

---

## 📝 测试顺序建议

1. **先运行**: `test000_BasicConnectionTest` (30秒)
2. **然后运行**: `test001_AppLaunchStress` (1分钟)  
3. **最后运行**: `testZZZ_RunAllStressTests` (10-15分钟)

**不要一上来就运行完整测试套件！** 先确保基础测试能通过。

---

## 💡 小贴士

- 🔄 每次运行测试前先清理项目 (`⌘ + Shift + K`)
- 📱 确保选择了具体的模拟器
- ⏱️ 给模拟器足够的启动时间（等待完全加载）
- 🔌 确保 Mac 电量充足或已连接电源
- 💾 确保有足够的磁盘空间（至少 5GB）

---

## 🎉 准备好了吗？

现在打开 Xcode，按照上面的步骤操作吧！

**记住**: 先运行 `test000_BasicConnectionTest`，确保测试框架正常工作！

祝你测试顺利！🚀


